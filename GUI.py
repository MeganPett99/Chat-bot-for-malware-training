from function import chat_response
from tkinter import *


def send(event=None):
    input = TextBox.get("1.0", 'end-1c').strip()
    TextBox.delete("0.0", END)

    if input != '':
        ChatLog.config(state=NORMAL)
        ChatLog.insert(END, "You: " + input + '\n\n')
        ChatLog.config(foreground="#442265", font=("Arial", 10))
        res = chat_response(input)
        ChatLog.insert(END, "CAMIS: " + res + '\n\n')
        ChatLog.config(state=DISABLED)
        ChatLog.yview(END)


gui = Tk()
gui.title("Camis prototype")
gui.geometry("500x510")
gui.resizable(width=FALSE, height=FALSE)

# Chat window
ChatLog = Text(gui, bd=0, bg="white", height="9", width="50", font="Arial", wrap=WORD)
ChatLog.insert(END, "Hello I'm CAMIS, ask me about my categories to get started!" + '\n\n')
ChatLog.config(state=DISABLED)

# scrollbar
scrollbar = Scrollbar(gui, command=ChatLog.yview, cursor="heart")
ChatLog['yscrollcommand'] = scrollbar.set

# button
SendButton = Button(gui, font=("Arial", 12, 'bold'), text="Send", width="10", height=5,
                    bd=0, bg="grey", activebackground="grey", fg='white',
                    command=send)
gui.bind('<Return>', send)

TextBox = Text(gui, bd=0, bg="white", width="50", height="5", font="Arial")

# Place all components on the screen
scrollbar.place(x=475, y=7, height=400)
ChatLog.place(x=6, y=6, height=400, width=470)
TextBox.place(x=6, y=408, height=90, width=360)
SendButton.place(x=370, y=408, height=90)
gui.mainloop()
